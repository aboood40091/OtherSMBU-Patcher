#!/usr/bin/env python3
# -*- coding: utf-8 -*-

# OtherSMBU Patcher
# Version 0.1
# Copyright Â© 2018 Other Team

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

################################################################
################################################################

from os.path import dirname, realpath
import sys


curr_path = dirname(realpath(sys.argv[0])).replace("\\", "/")
cython_available = False
gamepath = ''
patchpath = ''
SpriteCache = {}

Layouts = {
    "ChallengeImage": 0x2000,
    "ChallengeMenu": 0x4000,
    "Common": 0x14000,
    "CourseImage": 0x2000,
    "CourseSelect": 0x6000,
    "FreeMenu": 0x2000,
    "Game": 0x8000,
    "Title": 0x4000,
    "VSMenu": 0x2000,
}

Tracks = {
    "STRM_BGM_SELECT_W1": (0x2F63120, 0x100958),
    "STRM_BGM_HIKOUSEN_FAST": (0x982FA00, 0x2B28E0),
    "STRM_BGM_HIKOUSENBOSS_CREAR": (0xB51F720, 0x2E150),
    "STRM_BGM_HIKOUSEN": (0x956B9A0, 0x2C4060),
    "STRM_BGM_ATHLETIC_FAST": (0x5EE4CE0, 0x131B18),
    "STRM_BGM_ATHLETIC_FAST - Baby Yoshi": (0x6148320, 0x12E160),
    "STRM_BGM_ATHLETIC - Baby Yoshi": (0x5D79D40, 0x16AFA0),
    "STRM_BGM_ATHLETIC_FAST - Yoshi": (0x6016800, 0x131B18),
    "STRM_BGM_ATHLETIC - Yoshi": (0x5BEC4A0, 0x18D8A0),
    "STRM_BGM_ATHLETIC": (0x5A5EC00, 0x18D8A0),
    "STRM_BGM_MG_BTL": (0xC0F5220, 0x194348),
    "STRM_BGM_MG_BTL_END": (0xC289580, 0x12A58),
    "STRM_BGM_SANBASHI_FAST": (0xC7F8A60, 0x1BCBC8),
    "STRM_BGM_SANBASHI_FAST - Baby Yoshi": (0xCB72220, 0x168C98),
    "STRM_BGM_SANBASHI - Baby Yoshi": (0xC667C80, 0x190DE0),
    "STRM_BGM_SANBASHI_FAST - Yoshi": (0xC9B5640, 0x1BCBC8),
    "STRM_BGM_SANBASHI - Yoshi": (0xC4847E0, 0x1E3490),
    "STRM_BGM_SANBASHI": (0xC2A1340, 0x1E3488),
    "STRM_BGM_BONUS_FAST": (0x9F8F800, 0xF95A0),
    "STRM_BGM_BONUS_FAST - Baby Yoshi": (0xA182340, 0xF7A48),
    "STRM_BGM_BONUS - Baby Yoshi": (0x9E7CEA0, 0x112950),
    "STRM_BGM_BONUS_FAST - Yoshi": (0xA088DA0, 0xF95A0),
    "STRM_BGM_BONUS - Yoshi": (0x9D55540, 0x127958),
    "STRM_BGM_BONUS": (0x9C2DBA0, 0x127990),
    "STRM_BGM_LAST_BOSS_FAST": (0xDEC0B40, 0x166598), # 0xA428100
    "STRM_BGM_LAST_BOSS": (0xDD12B20, 0x1AE018), # 0xA27A0E0
    "STRM_BGM_LAST_BOSS2_CLEAR": (0xE3AA500, 0x76EE0),
    "WSD_BGM_MAP_DEMO_W8": (0x2DF9D00, 0x59F88),
    "STRM_BGM_LAST_CASTLE_APPEAR": (0x3AB5BA0, 0x7EC08),
    "STRM_BGM_HIKOUSEN_BOSS_FAST": (0xB3E9D80, 0x1359A0),
    "STRM_BGM_HIKOUSEN_BOSS": (0xB271FA0, 0x177DC8),
    "STRM_BGM_SHIRO_FAST": (0x92B6BA0, 0x2B4AD8),
    "STRM_BGM_SHIRO_BOSS_CLEAR": (0xAEB4B20, 0x2D858),
    "STRM_BGM_SHIRO": (0x8FBB240, 0x2FB958),
    "STRM_BGM_SHADOW_START": (0x3C68340, 0x24BD8),
    "WSD_BGM_COIN_EDIT": (0x38D2A40, 0xE9360),
    "STRM_BGM_STAFF_CREDIT": (0xD399D40, 0x832388),
    "STRM_BGM_DOWN": (0x3C50FA0, 0x17388),
    "STRM_BGM_SABAKU_FAST": (0x717CF00, 0x211BA0),
    "STRM_BGM_SABAKU_FAST - Baby Yoshi": (0x75A0640, 0x211BA0),
    "STRM_BGM_SABAKU - Baby Yoshi": (0x6F3BBA0, 0x241350),
    "STRM_BGM_SABAKU_FAST - Yoshi": (0x738EAA0, 0x211BA0),
    "STRM_BGM_SABAKU - Yoshi": (0x6CFA840, 0x241350),
    "STRM_BGM_SABAKU": (0x6AB94E0, 0x241350),
    "STRM_BGM_ROAD_TO_LAST_FAST": (0xA642060, 0x66E18),
    "STRM_BGM_ROAD_TO_LAST": (0xA5BF340, 0x82D20),
    "STRM_BGM_LAST_BOSS2_HARP": (0xE4213E0, 0x98188),
    "STRM_BGM_DEMO_ED": (0x169B340, 0x97248),
    "STRM_BGM_DEMO_ED2": (0x17325A0, 0xFBE88),
    "STRM_BGM_LAST_BOSS_CLEAR": (0xE0270E0, 0x30C98), # 0xA58E6A0
    "STRM_BGM_ALL_CMPLT_5STARS": (0x3A463A0, 0x1DD88),
    "STRM_BGM_DOWN_MULTI": (0x3BE2900, 0x195D8),
    "STRM_BGM_ODAI_CLEAR": (0x3CA7460, 0x191E0),
    "WSD_BGM_CHEEPFANFARE_LR_RY_32": (0x3B8AB40, 0x16120),
    "STRM_BGM_COURSE_OUT_ALL_BUBBLE": (0x3A7D960, 0x159D0),
    "STRM_BGM_MINIGAME_FANFARE_BAD": (0x3B347C0, 0x1A520),
    "STRM_BGM_MINIGAME_FANFARE_GOOD": (0x3B4ECE0, 0x12A58),
    "STRM_BGM_STAR_COIN_CMPLT_ALL": (0x3B61740, 0x18008),
    "STRM_BGM_STAR_COIN_CMPLT_WORLD": (0x3B79760, 0x113D8),
    "STRM_BGM_COIN_WIN": (0x3C9A8C0, 0xCB90),
    "STRM_BGM_SELECT_W4": (0x32EBB60, 0xDB010),
    "STRM_BGM_GAMEOVER": (0x3BFBEE0, 0x30DD8),
    "STRM_BGM_OBAKE_FAST": (0x66C4D20, 0x1E5A08),
    "STRM_BGM_OBAKE_FAST - Baby Yoshi": (0x68AA740, 0x209A08),
    "STRM_BGM_OBAKE - Baby Yoshi": (0x64C2740, 0x2025D0),
    "STRM_BGM_OBAKE": (0x627B720, 0x247020),
    "STRM_BGM_DEMO_OP2": (0x14080C0, 0x9DD58),
    "STRM_BGM_DEMO_OP": (0x1294DE0, 0x1732D8),
    "STRM_BGM_MORI_FAST": (0xBBB9700, 0x1BE808),
    "STRM_BGM_MORI_FAST - Baby Yoshi": (0xBF36700, 0x1BE808),
    "STRM_BGM_MORI - Baby Yoshi": (0xB9825A0, 0x237150),
    "STRM_BGM_MORI_FAST - Yoshi": (0xBD77F20, 0x1BE7D0),
    "STRM_BGM_MORI - Yoshi": (0xB76A8C0, 0x217CC8),
    "STRM_BGM_MORI": (0xB552BE0, 0x217CD8),
    "STRM_BGM_TORIDE_BOSS_FAST": (0xA844820, 0x15C358),
    "STRM_BGM_TORIDE_BOSS": (0xA6A9440, 0x19B3E0),
    "STRM_BGM_SHIRO_BOSS_FAST": (0xAC766C0, 0x23E448),
    "STRM_BGM_SHIRO_BOSS": (0xA9CF120, 0x2A75A0),
    "STRM_BGM_SELECT_W2": (0x3063A80, 0xCB920),
    "STRM_BGM_COURSE_CLEAR": (0x39BBDA0, 0x8A5F6),
    "STRM_BGM_MENU - Track 2": (0x1C70EA0, 0xE68E0),
    "STRM_BGM_MENU": (0x1B8A5C0, 0xE68E0),
    "STRM_BGM_LAST_BOSS2_FAST": (0xE223960, 0x186B88),
    "STRM_BGM_LAST_BOSS2": (0xE058180, 0x1CB7E0),
    "STRM_BGM_SELECT_W7": (0x355D680, 0xCB560),
    "STRM_BGM_KAZAN_FAST": (0x8724380, 0x2AC918),
    "STRM_BGM_KAZAN_FAST - Baby Yoshi": (0x89D0CA0, 0x2AC918),
    "STRM_BGM_KAZAN - Baby Yoshi": (0x83EEB20, 0x335858),
    "STRM_BGM_KAZAN": (0x80B92C0, 0x335860),
    "STRM_BGM_KAZAN_TIKA_FAST": (0xD032AA0, 0x13D060),
    "STRM_BGM_KAZAN_TIKA_FAST - Baby Yoshi": (0xD16FB00, 0x141F18),
    "STRM_BGM_KAZAN_TIKA - Baby Yoshi": (0xCE89600, 0x1A9488),
    "STRM_BGM_KAZAN_TIKA": (0xCCE0160, 0x1A9488),
    "STRM_BGM_HIKOUSEN_ROUKA_FAST": (0x9B9C940, 0x8BD60), # 0xDC86A40
    "STRM_BGM_HIKOUSEN_ROUKA": (0x9AE22E0, 0xBA660), # 0xDBCC3E0
    "STRM_BGM_CHIJOU_FAST": (0x43F9D40, 0x1602A0),
    "STRM_BGM_CHIJOU_FAST - Baby Yoshi": (0x46BA040, 0x163FA0),
    "STRM_BGM_CHIJOU - Baby Yoshi": (0x4260AA0, 0x1992A0),
    "STRM_BGM_CHIJOU_FAST - Yoshi": (0x4559FE0, 0x160060),
    "STRM_BGM_CHIJOU - Yoshi": (0x40A00C0, 0x1C09E0),
    "STRM_BGM_CHIJOU": (0x3F06E20, 0x1992A0),
    "WSD_BGM_SELECT_W8": (0x2C62CC0, 0xCB810),
    "WSD_BGM_SHIRO_LAST_FAST": (0xE5C6BE0, 0xE3D20),
    "WSD_BGM_SHIRO_LAST": (0xE4B9700, 0x10D4C8),
    "STRM_BGM_COURSE_CLEAR_ZORO": (0x3BA0C60, 0x41C98),
    "STRM_BGM_SELECT_W6": (0x3492120, 0xCB560),
    "STRM_BGM_SHADOW": (0xD2B1C60, 0xE2F88),
    "STRM_BGM_YUKI_FAST": (0x7CAA480, 0x154FC8),
    "STRM_BGM_YUKI_FAST - Baby Yoshi": (0x7F5F4C0, 0x154B60),
    "STRM_BGM_YUKI - Baby Yoshi": (0x7B111E0, 0x1992A0),
    "STRM_BGM_YUKI_FAST - Yoshi": (0x7DFF460, 0x160060),
    "STRM_BGM_YUKI - Yoshi": (0x7950800, 0x1C09E0),
    "STRM_BGM_YUKI": (0x77B7560, 0x1992A0),
    "STRM_BGM_SELECT_W5 - Haunted": (0x31FA900, 0xF1260),
    "STRM_BGM_SELECT_W5": (0x33C6B80, 0xCB588),
    "STRM_BGM_SELECT_W3": (0x312F3A0, 0xCB560),
    "WSD_BGM_STAR_DRC": (0x3857EE0, 0x7AB58),
    "STRM_BGM_STAR_FAST": (0x3E121E0, 0x4F798),
    "SE_BGM_CS_STAR": (0xE24260, 0xF0C0),
    "STRM_BGM_STAR_FAST - Baby Yoshi": (0x3EB1120, 0x4F798),
    "STRM_BGM_STAR - Baby Yoshi": (0x3DB81C0, 0x5A010),
    "STRM_BGM_STAR_FAST - Yoshi": (0x3E61980, 0x4F798),
    "STRM_BGM_STAR - Yoshi": (0x3D5E1A0, 0x5A010),
    "STRM_BGM_STAR": (0x3D04180, 0x5A010),
    "WSD_BGM_SELECT_W9": (0x2D2E4E0, 0xCB810),
    "STRM_BGM_SWITCH": (0x3714320, 0x7FF60),
    "STRM_BGM_TITLE": (0x19D7720, 0x1B2B60),
    "STRM_BGM_MINIGAME - Track 2": (0xB0AC8A0, 0x1C5348),
    "STRM_BGM_MINIGAME": (0xAEE7540, 0x1C5348),
    "STRM_BGM_TORIDE_FAST": (0x8E430C0, 0x172F90),
    "STRM_BGM_TORIDEBOSS_CREAR": (0xA9A0B80, 0x2E208),
    "STRM_BGM_TORIDE": (0x8C827A0, 0x1C0910),
    "STRM_BGM_CHIKA_FAST": (0x4E8EF00, 0x1C4A98),
    "STRM_BGM_CHIKA_FAST - Baby Yoshi": (0x5218440, 0x1CD548),
    "STRM_BGM_CHIKA - Baby Yoshi": (0x4C5DD20, 0x2311D8),
    "STRM_BGM_CHIKA_FAST - Yoshi": (0x50539A0, 0x1C4A90),
    "STRM_BGM_CHIKA - Yoshi": (0x4A40840, 0x21D4E0),
    "STRM_BGM_CHIKA": (0x4823360, 0x21D4E0),
    "STRM_BGM_WATER_FAST": (0x5768BC0, 0x178658),
    "STRM_BGM_WATER_FAST - Baby Yoshi": (0x58E1220, 0x178658),
    "STRM_BGM_WATER - Baby Yoshi": (0x55A9C20, 0x1BEFA0),
    "STRM_BGM_WATER": (0x53EAC40, 0x1BEFD0),
    "STRM_BGM_MULTI_RESULT": (0x3794280, 0xC3C60),
    "STRM_BGM_SHADOW_CATCH": (0x3C8CF20, 0xD9A0),
    "STRM_BGM_MULTI_FAIL": (0x3C2CCC0, 0x242D8),
}

Tree = []
